# 25.12.01 算法刷题笔记

## 力扣：51. N 皇后
**链接**：https://leetcode.cn/problems/n-queens/  
**相关标签**：`数组` `回溯`  
**难度**：`困难`
### 方法1：`深度优先搜索`
- **时间复杂度**：$O(n!)$
- **空间复杂度**：$O(n)$
```cpp
class Solution {
public:
    vector<vector<string>> solveNQueens(int n) {
        vector<bool> y(n, false), p(2*n-1, false), q(2*n-1, false);
        vector<vector<string>> ans;
        vector<string> temp(n, string(n, '.'));
        auto dfs = [&](this auto&& dfs, int x) -> void {
            if(x == n){
                ans.push_back(temp);
                return;
            }
            for(int i=0; i<n; i++){
                if(y[i] || p[x+i] || q[i-x+n-1]) continue;
                p[x+i] = q[i-x+n-1] = y[i] = true;
                temp[x][i] = 'Q';
                dfs(x+1);
                temp[x][i] = '.';
                p[x+i] = q[i-x+n-1] = y[i] = false;
            }
        };
        dfs(0);
        return ans;
    }
};
```