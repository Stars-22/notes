# 25.12.10 算法刷题笔记

## 力扣：32. 最长有效括号
**链接**：https://leetcode.cn/problems/longest-valid-parentheses/  
**相关标签**：`栈` `字符串` `动态规划`  
**难度**：`困难`
### 方法1：`动态规划`
- **时间复杂度**：$O(n)$
- **空间复杂度**：$O(n)$
```cpp
class Solution {
public:
    int longestValidParentheses(string s) {
        int n = s.size(), ans = 0;
        vector<int> dp(n+1, 0);
        for(int i=0; i<n; i++){
            if(s[i] == '(') continue;
            int index = i - dp[i] - 1;
            if(index < 0) continue;
            if(s[index] == '('){
                dp[i+1] = i - index + 1;
                if(index >= 0) dp[i+1] += dp[index];
                ans = max(ans, dp[i+1]);
            }
        }
        return ans;
    }
};
```
### 方法2：`双指针`
- **时间复杂度**：$O(n)$
- **空间复杂度**：$O(1)$
```cpp
class Solution {
public:
    int longestValidParentheses(string s) {
        int n = s.size(), ans = 0, l = 0, r = 0;
        for(int i=0; i<n; i++){
            if(s[i] == '(') l++;
            else r++;
            if(l == r) ans = max(ans, l*2);
            if(r > l) l = r = 0;
        }
        l = r = 0;
        for(int i=n-1; i>=0; i--){
            if(s[i] == '(') l++;
            else r++;
            if(l == r) ans = max(ans, l*2);
            if(r < l) l = r = 0;
        }
        return ans;
    }
};
```